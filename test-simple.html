<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Notification Test</title>
</head>
<body data-version="test001">
    <h1>Simple Notification Test</h1>
    <p>This is a minimal test to verify notifications work on GitHub Pages.</p>
    
    <button onclick="testNotifications()">Test Notifications</button>
    <button onclick="requestPermission()">Request Permission</button>
    
    <div id="status"></div>
    
    <script>
        async function testNotifications() {
            const status = document.getElementById('status');
            
            // Check if notifications are supported
            if (!('Notification' in window)) {
                status.innerHTML = '❌ Notifications not supported';
                return;
            }
            
            // Check permission
            if (Notification.permission === 'granted') {
                new Notification('Test Notification', {
                    body: 'Notifications are working!',
                    icon: '/favicon.ico'
                });
                status.innerHTML = '✅ Notification sent';
            } else {
                status.innerHTML = '⚠️ Permission not granted';
            }
        }
        
        async function requestPermission() {
            const status = document.getElementById('status');
            
            if (Notification.permission === 'default') {
                const permission = await Notification.requestPermission();
                status.innerHTML = `Permission: ${permission}`;
            } else {
                status.innerHTML = `Current permission: ${Notification.permission}`;
            }
        }
        
        // Test service worker registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/notification-worker.js')
                .then(registration => {
                    console.log('Service Worker registered:', registration);
                    document.getElementById('status').innerHTML = '✅ Service Worker registered';
                })
                .catch(error => {
                    console.error('Service Worker registration failed:', error);
                    document.getElementById('status').innerHTML = '❌ Service Worker failed: ' + error.message;
                });
        } else {
            document.getElementById('status').innerHTML = '❌ Service Workers not supported';
        }
    </script>
</body>
</html> 